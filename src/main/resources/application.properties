spring.application.name=control-finaciero

# ========================================
# DATABASE CONFIGURATION - NEON POSTGRESQL
# ========================================
spring.datasource.url=jdbc:postgresql://ep-dawn-unit-adn7096y-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require
spring.datasource.username=neondb_owner
spring.datasource.password=npg_5OimKyqF9sIX
spring.datasource.driver-class-name=org.postgresql.Driver

# ========================================
# JPA / HIBERNATE CONFIGURATION
# ========================================
# Dialecto personalizado de PostgreSQL con soporte para ENUMs
spring.jpa.database-platform=com.controfinanciero.infrastructure.config.PostgreSQLEnumDialect

# NO crear/actualizar esquema automaticamente (ya existe en Neon)
spring.jpa.hibernate.ddl-auto=none

# Mostrar SQL en consola (util para desarrollo)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Configuracion de tipos personalizados (ENUMs)
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
# Usar tipos nativos de PostgreSQL para ENUMs
spring.jpa.properties.hibernate.type.preferred_jdbc_type_for_enum=NAMED_ENUM
# Permitir casting automatico de String a ENUM en PostgreSQL
spring.jpa.properties.hibernate.jdbc.use_get_generated_keys=true
# Mapear ENUMs de Java a ENUMs de PostgreSQL usando el nombre
spring.jpa.properties.hibernate.type.wrapper_array_handling=allow
# Configurar el dialecto para soportar ENUMs nativos
spring.jpa.properties.hibernate.dialect.postgresql.use_native_enums=true

# ========================================
# CONNECTION POOL CONFIGURATION
# ========================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ========================================
# LOGGING CONFIGURATION
# ========================================
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.com.controfinanciero=DEBUG

# ========================================
# SERVER CONFIGURATION
# ========================================
server.port=8080
server.error.include-message=always
server.error.include-binding-errors=always

